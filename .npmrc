# Fix pour toutes les erreurs npm install connues

# 1. FIX: Dépendances optionnelles ne cassent pas l'install si elles échouent
optional=true

# 2. FIX: Résout les conflits de peer dependencies (discord.js 14 vs autres)
legacy-peer-deps=true

# 3. FIX: Évite les erreurs ERESOLVE qui bloquent l'install
strict-peer-dependencies=false

# 4. FIX: Augmente le timeout pour les packages lents comme canvas
fetch-timeout=300000
fetch-retries=5
fetch-retry-mintimeout=20000
fetch-retry-maxtimeout=120000

# 5. FIX: Évite les erreurs de permissions sur npm cache
prefer-offline=false
audit=false
fund=false

# 6. FIX: Force l'utilisation de scripts post-install (nécessaire pour certains packages natifs)
ignore-scripts=false

# 7. FIX: Désactive la progression pour éviter les timeouts sur CI/CD
progress=false

# 8. FIX: Utilise le cache local pour accélérer l'install
cache-min=86400
